<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>MetaAI Launcher</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin-top: 50px;
      background: #111;
      color: white;
    }
    h1 {
      margin-bottom: 30px;
    }
    button, select, input[type="range"] {
      margin: 10px;
      padding: 12px 24px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background: #333;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #555;
    }
    select {
      background: #222;
      padding: 10px;
      border-radius: 5px;
    }
    .section {
      margin: 30px auto;
      background: #222;
      padding: 20px;
      width: 80%;
      border-radius: 15px;
    }
    .label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .switch {
      appearance: none;
      width: 50px;
      height: 25px;
      background: #888;
      border-radius: 15px;
      position: relative;
      outline: none;
      cursor: pointer;
      transition: 0.3s;
    }
    .switch:checked {
      background: #0f0;
    }
    .switch::before {
      content: "";
      position: absolute;
      width: 23px;
      height: 23px;
      background: #000;
      border-radius: 50%;
      top: 1px;
      left: 1px;
      transition: 0.3s;
    }
    .switch:checked::before {
      transform: translateX(25px);
    }
  </style>
</head>
<body>
  <h1>üß† AIRIS </h1>

  <div class="section">
    <span class="label">Macos TitleBar</span>
    <input type="checkbox" class="switch" id="TitleBar">
<!--     
    <span class="label">Enable Roasting</span>
    <input type="checkbox" class="switch" id="roastSwitch" checked>
    
    <span class="label">Enable YouTube Summary</span>
    <input type="checkbox" class="switch" id="ytSwitch" checked>

    <span class="label">Enable Eye Tracking</span>
    <input type="checkbox" class="switch" id="eyeSwitch" checked>

    <span class="label">Enable Hand Gestures</span>
    <input type="checkbox" class="switch" id="handSwitch" checked> -->
  </div>

  <div class="section">
    <span class="label">AI Reply Language:</span>
    <select id="replyLang">
      <option value="en-IN">English</option>
      <option value="ta-IN">Tamil</option>
      <option value="hi-IN">Hindi</option>
    </select>

    <span class="label">Voice Language:</span>
    <select id="voiceLang">
      <option value="en-IN">English</option>
      <option value="ta-IN">Tamil</option>
      <option value="hi-IN">Hindi</option>
    </select>

    <span class="label">Voice Speed: <span id="speedLabel">Normal</span></span>
    <input type="range" min="0.5" max="2" step="0.1" value="1" id="voiceSpeed">
  </div>

  <div class="section">
    <button id="startAI">üöÄ Start Assistant</button>
    <button id="exitBtn" onclick="window.close()">‚ùå Exit</button>
  </div>

<script>
  const { ipcRenderer } = require('electron');

  const getSpeedLabel = (val) => {
    const v = parseFloat(val);
    if (v < 0.5) return "Slow";
    if (v < 1) return "Medium Slow";
    if (v < 1.25) return "Normal";
    if (v < 1.75) return "Medium Fast";
    return "Fast";
  };

  // üîÅ Load saved settings
  function loadSettings() {
    const saved = JSON.parse(localStorage.getItem("metaAIConfig") || "{}");

    document.getElementById("TitleBar").checked = saved.TitleBar === "WIN";
    document.getElementById("replyLang").value = saved.replyLang || "en-IN";
    document.getElementById("voiceLang").value = saved.voiceLang || "en-IN";
    document.getElementById("voiceSpeed").value = saved.voiceSpeed || 1;
    document.getElementById("speedLabel").innerText = getSpeedLabel(saved.voiceSpeed || 1);
  }

  // üíæ Save settings on change
  function saveSettings() {
    const config = {
      aiMode: document.getElementById("TitleBar").checked ? "Win" : "manual",

      replyLang: document.getElementById("replyLang").value,
      voiceLang: document.getElementById("voiceLang").value,
      voiceSpeed: parseFloat(document.getElementById("voiceSpeed").value)
    };
    localStorage.setItem("metaAIConfig", JSON.stringify(config));
  }



  // ‚è∞ Run after DOM loads
  document.addEventListener("DOMContentLoaded", () => {
    loadSettings();

    document.getElementById("voiceSpeed").addEventListener("input", (e) => {
      document.getElementById("speedLabel").innerText = getSpeedLabel(e.target.value);
      saveSettings();
    });

    const inputs = [
      "TitleBar",
      "replyLang", "voiceLang"
    ];
    inputs.forEach(id => {
      document.getElementById(id).addEventListener("change", saveSettings);
    });

    document.getElementById("exitBtn").addEventListener("click", () => {
      window.electronAPI.closeWindow();
    });

    document.getElementById("startAI").addEventListener("click", () => {
      const config = JSON.parse(localStorage.getItem("metaAIConfig"));
      ipcRenderer.send("start-ai", config);
      window.close();
    });
  });
</script>

</body>
</html>
